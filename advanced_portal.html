<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üõ°Ô∏è UIOTA Foundry - Advanced Guardian Operations</title>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.25.1/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.25.1/mode-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.25.1/theme-monokai.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        :root {
            --primary-bg: #0a0e1a;
            --secondary-bg: #1a1f2e;
            --tertiary-bg: #2a2f3e;
            --accent-blue: #00d4ff;
            --accent-purple: #7c3aed;
            --accent-green: #00ff88;
            --accent-orange: #ff6b35;
            --accent-red: #ff3333;
            --text-primary: #ffffff;
            --text-secondary: #b0b6c3;
            --text-muted: #6b7280;
            --border-color: rgba(255, 255, 255, 0.1);
            --glow-blue: 0 0 20px rgba(0, 212, 255, 0.3);
            --glow-purple: 0 0 20px rgba(124, 58, 237, 0.3);
            --glow-green: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--primary-bg);
            color: var(--text-primary);
            overflow: hidden;
            height: 100vh;
        }

        /* Animated Background */
        .neural-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.1;
        }

        /* Main Layout */
        .foundry-container {
            display: grid;
            grid-template-areas:
                "header header header"
                "sidebar main-panel right-panel"
                "sidebar main-panel right-panel";
            grid-template-columns: 280px 1fr 350px;
            grid-template-rows: 60px 1fr;
            height: 100vh;
            gap: 1px;
            background: #000;
        }

        /* Header */
        .foundry-header {
            grid-area: header;
            background: linear-gradient(90deg, var(--secondary-bg), var(--tertiary-bg));
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            border-bottom: 1px solid var(--border-color);
            box-shadow: var(--glow-blue);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .foundry-logo {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .system-metrics {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .metric-chip {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid var(--accent-blue);
            border-radius: 20px;
            padding: 5px 12px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .metric-value {
            color: var(--accent-blue);
            font-weight: 600;
        }

        /* Sidebar */
        .foundry-sidebar {
            grid-area: sidebar;
            background: var(--secondary-bg);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
        }

        .nav-section {
            padding: 20px 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .nav-title {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 5px;
        }

        .nav-item:hover {
            background: var(--tertiary-bg);
            box-shadow: var(--glow-blue);
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            box-shadow: var(--glow-purple);
        }

        .nav-icon {
            width: 20px;
            text-align: center;
        }

        /* Main Panel */
        .foundry-main {
            grid-area: main-panel;
            background: var(--primary-bg);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .workspace-tabs {
            display: flex;
            background: var(--secondary-bg);
            border-bottom: 1px solid var(--border-color);
            overflow-x: auto;
        }

        .workspace-tab {
            padding: 12px 20px;
            cursor: pointer;
            border-right: 1px solid var(--border-color);
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .workspace-tab:hover {
            background: var(--tertiary-bg);
        }

        .workspace-tab.active {
            background: var(--accent-blue);
            color: var(--primary-bg);
        }

        .workspace-content {
            flex: 1;
            display: none;
            overflow: auto;
        }

        .workspace-content.active {
            display: flex;
            flex-direction: column;
        }

        /* Code Editor */
        .code-workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 60% 40%;
            gap: 1px;
            height: 100%;
        }

        .editor-panel {
            background: var(--secondary-bg);
            position: relative;
        }

        .panel-header {
            background: var(--tertiary-bg);
            padding: 10px 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: between;
            align-items: center;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        #code-editor {
            height: calc(100% - 45px);
        }

        .terminal-panel {
            grid-column: 1 / -1;
            background: #000;
            color: var(--accent-green);
            font-family: 'Courier New', monospace;
            padding: 15px;
            overflow-y: auto;
        }

        /* Data Visualization */
        .viz-workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 15px;
            padding: 15px;
            height: 100%;
        }

        .viz-panel {
            background: var(--secondary-bg);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .viz-panel-header {
            background: var(--tertiary-bg);
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .viz-content {
            height: calc(100% - 50px);
            padding: 10px;
        }

        /* Guardian Network */
        .guardian-workspace {
            padding: 20px;
            height: 100%;
            overflow: auto;
        }

        .guardian-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .guardian-card {
            background: linear-gradient(135deg, var(--secondary-bg), var(--tertiary-bg));
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .guardian-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--glow-purple);
        }

        .guardian-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .guardian-status {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent-green);
            box-shadow: var(--glow-green);
        }

        /* Right Panel */
        .foundry-right {
            grid-area: right-panel;
            background: var(--secondary-bg);
            border-left: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
        }

        .right-panel-section {
            border-bottom: 1px solid var(--border-color);
            padding: 20px;
        }

        .section-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* FL Pipeline */
        .fl-pipeline {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .pipeline-step {
            background: var(--tertiary-bg);
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid var(--accent-blue);
            position: relative;
        }

        .step-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: var(--accent-green);
            border-radius: 0 0 8px 8px;
            transition: width 0.3s ease;
        }

        /* Real-time Feed */
        .activity-feed {
            max-height: 300px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .activity-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--accent-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .activity-content {
            flex: 1;
        }

        .activity-time {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Buttons and Controls */
        .action-button {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-bottom: 10px;
            width: 100%;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow-purple);
        }

        .danger-button {
            background: linear-gradient(135deg, var(--accent-red), var(--accent-orange));
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .foundry-container {
                grid-template-columns: 250px 1fr 300px;
            }
        }

        @media (max-width: 768px) {
            .foundry-container {
                grid-template-areas:
                    "header"
                    "main-panel";
                grid-template-columns: 1fr;
                grid-template-rows: 60px 1fr;
            }

            .foundry-sidebar,
            .foundry-right {
                display: none;
            }
        }

        /* Animation Classes */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .glow {
            animation: glow 3s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 5px var(--accent-blue); }
            to { box-shadow: var(--glow-blue); }
        }

        /* Neural Network Animation */
        .neural-node {
            fill: var(--accent-blue);
            stroke: var(--accent-purple);
            stroke-width: 2;
        }

        .neural-link {
            stroke: var(--accent-blue);
            stroke-width: 1;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <div class="neural-background">
        <svg id="neural-network" width="100%" height="100%"></svg>
    </div>

    <div class="foundry-container">
        <!-- Header -->
        <div class="foundry-header">
            <div class="logo-section">
                <div class="foundry-logo">üõ°Ô∏è UIOTA FOUNDRY</div>
                <div style="color: var(--text-muted); font-size: 0.9rem;">Advanced Guardian Operations</div>
            </div>

            <div class="system-metrics">
                <div class="metric-chip">
                    <i class="fas fa-microchip"></i>
                    <span>CPU: <span class="metric-value" id="cpu-metric">34%</span></span>
                </div>
                <div class="metric-chip">
                    <i class="fas fa-memory"></i>
                    <span>RAM: <span class="metric-value" id="ram-metric">6.2GB</span></span>
                </div>
                <div class="metric-chip">
                    <i class="fas fa-network-wired"></i>
                    <span>Nodes: <span class="metric-value" id="nodes-metric">8</span></span>
                </div>
                <div class="metric-chip">
                    <i class="fas fa-brain"></i>
                    <span>FL: <span class="metric-value" id="fl-metric">Round 12</span></span>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="foundry-sidebar">
            <div class="nav-section">
                <div class="nav-title">Workspaces</div>
                <div class="nav-item active" onclick="switchWorkspace('overview')">
                    <i class="nav-icon fas fa-chart-line"></i>
                    <span>System Overview</span>
                </div>
                <div class="nav-item" onclick="switchWorkspace('code')">
                    <i class="nav-icon fas fa-code"></i>
                    <span>Code Laboratory</span>
                </div>
                <div class="nav-item" onclick="switchWorkspace('data')">
                    <i class="nav-icon fas fa-chart-bar"></i>
                    <span>Data Analytics</span>
                </div>
                <div class="nav-item" onclick="switchWorkspace('guardian')">
                    <i class="nav-icon fas fa-shield-alt"></i>
                    <span>Guardian Network</span>
                </div>
                <div class="nav-item" onclick="switchWorkspace('ml')">
                    <i class="nav-icon fas fa-brain"></i>
                    <span>ML Pipeline</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-title">Tools</div>
                <div class="nav-item" onclick="openTool('terminal')">
                    <i class="nav-icon fas fa-terminal"></i>
                    <span>Terminal</span>
                </div>
                <div class="nav-item" onclick="openTool('files')">
                    <i class="nav-icon fas fa-folder"></i>
                    <span>File Explorer</span>
                </div>
                <div class="nav-item" onclick="openTool('monitor')">
                    <i class="nav-icon fas fa-eye"></i>
                    <span>System Monitor</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-title">AI Assistant</div>
                <div class="nav-item" onclick="openAI('code-gen')">
                    <i class="nav-icon fas fa-magic"></i>
                    <span>Code Generator</span>
                </div>
                <div class="nav-item" onclick="openAI('analyzer')">
                    <i class="nav-icon fas fa-search"></i>
                    <span>Data Analyzer</span>
                </div>
                <div class="nav-item" onclick="openAI('optimizer')">
                    <i class="nav-icon fas fa-rocket"></i>
                    <span>Performance</span>
                </div>
            </div>
        </div>

        <!-- Main Panel -->
        <div class="foundry-main">
            <div class="workspace-tabs">
                <div class="workspace-tab active" data-workspace="overview">
                    <i class="fas fa-chart-line"></i>
                    <span>Overview</span>
                </div>
                <div class="workspace-tab" data-workspace="code">
                    <i class="fas fa-code"></i>
                    <span>Code Lab</span>
                </div>
                <div class="workspace-tab" data-workspace="data">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </div>
                <div class="workspace-tab" data-workspace="guardian">
                    <i class="fas fa-shield-alt"></i>
                    <span>Guardians</span>
                </div>
            </div>

            <!-- Overview Workspace -->
            <div class="workspace-content active" id="overview-workspace">
                <div class="viz-workspace">
                    <div class="viz-panel">
                        <div class="viz-panel-header">
                            <span><i class="fas fa-chart-line"></i> System Performance</span>
                            <button onclick="refreshData()" style="background: none; border: none; color: var(--accent-blue); cursor: pointer;">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div class="viz-content">
                            <div id="performance-chart"></div>
                        </div>
                    </div>

                    <div class="viz-panel">
                        <div class="viz-panel-header">
                            <span><i class="fas fa-network-wired"></i> Guardian Network</span>
                        </div>
                        <div class="viz-content">
                            <div id="network-graph"></div>
                        </div>
                    </div>

                    <div class="viz-panel">
                        <div class="viz-panel-header">
                            <span><i class="fas fa-brain"></i> FL Training Progress</span>
                        </div>
                        <div class="viz-content">
                            <div id="fl-progress-chart"></div>
                        </div>
                    </div>

                    <div class="viz-panel">
                        <div class="viz-panel-header">
                            <span><i class="fas fa-shield-alt"></i> Security Metrics</span>
                        </div>
                        <div class="viz-content">
                            <div id="security-dashboard"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Code Workspace -->
            <div class="workspace-content" id="code-workspace">
                <div class="code-workspace">
                    <div class="editor-panel">
                        <div class="panel-header">
                            <span><i class="fas fa-code"></i> Guardian Agent Generator</span>
                            <div>
                                <button onclick="runCode()" style="background: var(--accent-green); border: none; padding: 5px 10px; border-radius: 5px; color: white; margin-left: 10px;">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div id="code-editor"></div>
                    </div>

                    <div class="editor-panel">
                        <div class="panel-header">
                            <span><i class="fas fa-eye"></i> Live Preview</span>
                        </div>
                        <div id="code-preview" style="height: calc(100% - 45px); background: white; color: black; overflow: auto;"></div>
                    </div>

                    <div class="terminal-panel">
                        <div id="terminal-output">
                            <div>üõ°Ô∏è UIOTA Foundry Terminal v2.0 - AI-Assisted Development Environment</div>
                            <div>‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>
                            <div>Ready for Guardian development. Type 'help' for available commands.</div>
                            <div>> <span id="terminal-cursor">‚ñà</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Analytics Workspace -->
            <div class="workspace-content" id="data-workspace">
                <div class="viz-workspace">
                    <div class="viz-panel">
                        <div class="viz-panel-header">
                            <span><i class="fas fa-chart-area"></i> Data Flow Analysis</span>
                        </div>
                        <div class="viz-content">
                            <div id="data-flow-chart"></div>
                        </div>
                    </div>

                    <div class="viz-panel">
                        <div class="viz-panel-header">
                            <span><i class="fas fa-heatmap"></i> Performance Heatmap</span>
                        </div>
                        <div class="viz-content">
                            <div id="heatmap-chart"></div>
                        </div>
                    </div>

                    <div class="viz-panel">
                        <div class="viz-panel-header">
                            <span><i class="fas fa-project-diagram"></i> System Topology</span>
                        </div>
                        <div class="viz-content">
                            <div id="topology-graph"></div>
                        </div>
                    </div>

                    <div class="viz-panel">
                        <div class="viz-panel-header">
                            <span><i class="fas fa-wave-square"></i> Real-time Metrics</span>
                        </div>
                        <div class="viz-content">
                            <div id="realtime-metrics"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Guardian Network Workspace -->
            <div class="workspace-content" id="guardian-workspace">
                <div class="guardian-workspace">
                    <h2 style="margin-bottom: 20px; color: var(--accent-blue);">
                        <i class="fas fa-shield-alt"></i> Guardian Network Management
                    </h2>

                    <div class="guardian-grid">
                        <div class="guardian-card">
                            <div class="guardian-status"></div>
                            <div class="guardian-avatar">ü§ñ</div>
                            <h3>AI Guardian Alpha</h3>
                            <p style="color: var(--text-secondary); margin: 10px 0;">Machine Learning Specialist</p>
                            <div style="font-size: 0.9rem; color: var(--text-muted);">
                                Level 7 ‚Ä¢ 4,280 XP ‚Ä¢ Online
                            </div>
                            <div style="margin-top: 15px;">
                                <div style="background: rgba(0, 255, 136, 0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; display: inline-block;">
                                    Active Mission: FL Training
                                </div>
                            </div>
                        </div>

                        <div class="guardian-card">
                            <div class="guardian-status"></div>
                            <div class="guardian-avatar">üõ°Ô∏è</div>
                            <h3>Security Guardian Beta</h3>
                            <p style="color: var(--text-secondary); margin: 10px 0;">Cybersecurity Expert</p>
                            <div style="font-size: 0.9rem; color: var(--text-muted);">
                                Level 9 ‚Ä¢ 6,850 XP ‚Ä¢ Online
                            </div>
                            <div style="margin-top: 15px;">
                                <div style="background: rgba(0, 212, 255, 0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; display: inline-block;">
                                    Monitoring: Network Security
                                </div>
                            </div>
                        </div>

                        <div class="guardian-card">
                            <div class="guardian-status" style="background: var(--accent-orange);"></div>
                            <div class="guardian-avatar">üì±</div>
                            <h3>Mobile Guardian Gamma</h3>
                            <p style="color: var(--text-secondary); margin: 10px 0;">Cross-Platform Developer</p>
                            <div style="font-size: 0.9rem; color: var(--text-muted);">
                                Level 5 ‚Ä¢ 2,120 XP ‚Ä¢ Syncing
                            </div>
                            <div style="margin-top: 15px;">
                                <div style="background: rgba(255, 107, 53, 0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; display: inline-block;">
                                    Task: APK Deployment
                                </div>
                            </div>
                        </div>

                        <div class="guardian-card">
                            <div class="guardian-status"></div>
                            <div class="guardian-avatar">üåê</div>
                            <h3>Network Guardian Delta</h3>
                            <p style="color: var(--text-secondary); margin: 10px 0;">Infrastructure Specialist</p>
                            <div style="font-size: 0.9rem; color: var(--text-muted);">
                                Level 8 ‚Ä¢ 5,430 XP ‚Ä¢ Online
                            </div>
                            <div style="margin-top: 15px;">
                                <div style="background: rgba(124, 58, 237, 0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; display: inline-block;">
                                    Managing: P2P Network
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="background: var(--secondary-bg); border-radius: 15px; padding: 20px; margin-top: 20px;">
                        <h3 style="margin-bottom: 15px; color: var(--accent-purple);">
                            <i class="fas fa-project-diagram"></i> Network Topology
                        </h3>
                        <div id="guardian-network-viz" style="height: 300px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel -->
        <div class="foundry-right">
            <div class="right-panel-section">
                <div class="section-title">
                    <i class="fas fa-brain"></i>
                    FL Pipeline Status
                </div>
                <div class="fl-pipeline">
                    <div class="pipeline-step">
                        <div style="font-weight: 600; margin-bottom: 5px;">Data Preprocessing</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">Completed</div>
                        <div class="step-progress" style="width: 100%;"></div>
                    </div>
                    <div class="pipeline-step">
                        <div style="font-weight: 600; margin-bottom: 5px;">Model Training</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">In Progress - Round 12/15</div>
                        <div class="step-progress" style="width: 80%;"></div>
                    </div>
                    <div class="pipeline-step">
                        <div style="font-weight: 600; margin-bottom: 5px;">Aggregation</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">Waiting</div>
                        <div class="step-progress" style="width: 0%;"></div>
                    </div>
                    <div class="pipeline-step">
                        <div style="font-weight: 600; margin-bottom: 5px;">Validation</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">Queued</div>
                        <div class="step-progress" style="width: 0%;"></div>
                    </div>
                </div>
            </div>

            <div class="right-panel-section">
                <div class="section-title">
                    <i class="fas fa-cogs"></i>
                    Quick Actions
                </div>
                <button class="action-button" onclick="startFLRound()">
                    <i class="fas fa-play"></i> Start FL Round
                </button>
                <button class="action-button" onclick="deployGuardian()">
                    <i class="fas fa-rocket"></i> Deploy Guardian
                </button>
                <button class="action-button" onclick="runDiagnostics()">
                    <i class="fas fa-stethoscope"></i> System Diagnostics
                </button>
                <button class="action-button danger-button" onclick="emergencyStop()">
                    <i class="fas fa-stop"></i> Emergency Stop
                </button>
            </div>

            <div class="right-panel-section" style="flex: 1;">
                <div class="section-title">
                    <i class="fas fa-stream"></i>
                    Activity Feed
                </div>
                <div class="activity-feed" id="activity-feed">
                    <div class="activity-item">
                        <div class="activity-icon"><i class="fas fa-brain"></i></div>
                        <div class="activity-content">
                            <div>FL Round 12 completed</div>
                            <div class="activity-time">2 minutes ago</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon"><i class="fas fa-shield-alt"></i></div>
                        <div class="activity-content">
                            <div>Security Guardian deployed</div>
                            <div class="activity-time">5 minutes ago</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon"><i class="fas fa-code"></i></div>
                        <div class="activity-content">
                            <div>New agent code generated</div>
                            <div class="activity-time">8 minutes ago</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon"><i class="fas fa-network-wired"></i></div>
                        <div class="activity-content">
                            <div>Network topology updated</div>
                            <div class="activity-time">12 minutes ago</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Neural Network Background
        function initNeuralBackground() {
            const svg = d3.select("#neural-network");
            const width = window.innerWidth;
            const height = window.innerHeight;

            const nodes = Array.from({length: 30}, (_, i) => ({
                id: i,
                x: Math.random() * width,
                y: Math.random() * height,
                vx: (Math.random() - 0.5) * 0.5,
                vy: (Math.random() - 0.5) * 0.5
            }));

            svg.selectAll("circle")
                .data(nodes)
                .enter()
                .append("circle")
                .attr("class", "neural-node")
                .attr("r", 2)
                .attr("cx", d => d.x)
                .attr("cy", d => d.y);

            function updateNetwork() {
                nodes.forEach(node => {
                    node.x += node.vx;
                    node.y += node.vy;

                    if (node.x < 0 || node.x > width) node.vx *= -1;
                    if (node.y < 0 || node.y > height) node.vy *= -1;
                });

                svg.selectAll("circle")
                    .attr("cx", d => d.x)
                    .attr("cy", d => d.y);

                requestAnimationFrame(updateNetwork);
            }
            updateNetwork();
        }

        // Initialize Code Editor
        function initCodeEditor() {
            if (typeof ace !== 'undefined') {
                const editor = ace.edit("code-editor");
                editor.setTheme("ace/theme/monokai");
                editor.session.setMode("ace/mode/python");
                editor.setValue(`# Guardian Agent Generator
# AI-Assisted Development for UIOTA

class GuardianAgent:
    def __init__(self, guardian_type="AI", specialization="ML"):
        self.type = guardian_type
        self.specialization = specialization
        self.level = 1
        self.xp = 0
        self.active = False

    def deploy(self):
        """Deploy guardian to the network"""
        print(f"Deploying {self.type} Guardian...")
        self.active = True
        return f"Guardian {self.type} deployed successfully"

    def train_model(self, data):
        """Federated learning training"""
        print("Starting federated learning round...")
        # AI-generated training logic
        accuracy = 0.94 + (random.random() * 0.05)
        return f"Training complete. Accuracy: {accuracy:.3f}"

    def secure_network(self):
        """Security monitoring and protection"""
        threats_detected = random.randint(0, 3)
        return f"Security scan complete. {threats_detected} threats mitigated"

# Auto-generate guardian instance
guardian = GuardianAgent("AI", "Federated Learning")
result = guardian.deploy()
print(result)`);
            }
        }

        // Initialize Charts
        function initCharts() {
            // Performance Chart
            const performanceData = [{
                x: ['CPU', 'Memory', 'Network', 'Storage'],
                y: [34, 62, 78, 45],
                type: 'bar',
                marker: { color: ['#00d4ff', '#7c3aed', '#00ff88', '#ff6b35'] }
            }];

            Plotly.newPlot('performance-chart', performanceData, {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                margin: { t: 20, r: 20, b: 40, l: 40 }
            }, { responsive: true });

            // FL Progress Chart
            const flData = [{
                x: Array.from({length: 12}, (_, i) => i + 1),
                y: [0.72, 0.78, 0.82, 0.85, 0.87, 0.89, 0.91, 0.92, 0.93, 0.94, 0.94, 0.95],
                type: 'scatter',
                mode: 'lines+markers',
                line: { color: '#00ff88', width: 3 },
                marker: { color: '#00d4ff', size: 8 }
            }];

            Plotly.newPlot('fl-progress-chart', flData, {
                title: 'Model Accuracy Over Time',
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                margin: { t: 40, r: 20, b: 40, l: 40 }
            }, { responsive: true });

            // Network Graph
            initNetworkGraph();
        }

        function initNetworkGraph() {
            const networkData = [{
                type: "scatter",
                mode: "markers+text",
                x: [1, 2, 3, 2, 1.5, 2.5],
                y: [1, 2, 1, 0.5, 1.5, 1.5],
                text: ['AI-Œ±', 'SEC-Œ≤', 'MOB-Œ≥', 'NET-Œ¥', 'Core', 'Hub'],
                textposition: 'middle center',
                marker: {
                    size: [30, 25, 20, 25, 35, 20],
                    color: ['#00d4ff', '#7c3aed', '#ff6b35', '#00ff88', '#ffffff', '#ff3333'],
                    line: { width: 2, color: '#ffffff' }
                }
            }];

            Plotly.newPlot('network-graph', networkData, {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                showlegend: false,
                margin: { t: 20, r: 20, b: 20, l: 20 },
                xaxis: { visible: false },
                yaxis: { visible: false }
            }, { responsive: true });
        }

        // Workspace Management
        function switchWorkspace(workspace) {
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update tabs
            document.querySelectorAll('.workspace-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-workspace="${workspace}"]`).classList.add('active');

            // Update content
            document.querySelectorAll('.workspace-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${workspace}-workspace`).classList.add('active');

            // Initialize workspace-specific content
            if (workspace === 'code') {
                setTimeout(initCodeEditor, 100);
            }
        }

        // Real-time Updates
        function updateMetrics() {
            document.getElementById('cpu-metric').textContent = Math.floor(Math.random() * 40 + 20) + '%';
            document.getElementById('ram-metric').textContent = (Math.random() * 2 + 5).toFixed(1) + 'GB';

            // Update activity feed
            const activities = [
                'FL round completed',
                'Security scan finished',
                'Guardian deployed',
                'Network optimized',
                'Data synchronized',
                'Model updated'
            ];

            if (Math.random() < 0.3) {
                addActivity(activities[Math.floor(Math.random() * activities.length)]);
            }
        }

        function addActivity(message) {
            const feed = document.getElementById('activity-feed');
            const item = document.createElement('div');
            item.className = 'activity-item';
            item.innerHTML = `
                <div class="activity-icon"><i class="fas fa-circle"></i></div>
                <div class="activity-content">
                    <div>${message}</div>
                    <div class="activity-time">Just now</div>
                </div>
            `;
            feed.insertBefore(item, feed.firstChild);

            // Remove old items
            while (feed.children.length > 10) {
                feed.removeChild(feed.lastChild);
            }
        }

        // Action Functions
        function startFLRound() {
            addActivity('üß† New FL training round initiated');
            const currentRound = parseInt(document.getElementById('fl-metric').textContent.split(' ')[1]);
            document.getElementById('fl-metric').textContent = `Round ${currentRound + 1}`;
        }

        function deployGuardian() {
            addActivity('üõ°Ô∏è Guardian deployment in progress');
        }

        function runDiagnostics() {
            addActivity('üîß System diagnostics running...');
            setTimeout(() => addActivity('‚úÖ All systems operational'), 2000);
        }

        function emergencyStop() {
            addActivity('üö® Emergency stop activated');
        }

        function runCode() {
            const output = document.getElementById('terminal-output');
            output.innerHTML += `<div>> Running Guardian code...</div>`;
            output.innerHTML += `<div>üõ°Ô∏è Guardian AI deployed successfully</div>`;
            output.innerHTML += `<div>üìä Training accuracy: 0.947</div>`;
            output.innerHTML += `<div>‚úÖ Security scan complete</div>`;
            output.innerHTML += `<div>> <span id="terminal-cursor">‚ñà</span></div>`;
            output.scrollTop = output.scrollHeight;
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            initNeuralBackground();
            initCharts();
            setInterval(updateMetrics, 3000);

            // Add some initial activities
            setTimeout(() => addActivity('üöÄ UIOTA Foundry initialized'), 1000);
            setTimeout(() => addActivity('üõ°Ô∏è Guardian network online'), 2000);
            setTimeout(() => addActivity('üß† FL pipeline ready'), 3000);
        });
    </script>
</body>
</html>